<% environment.context_class.instance_eval { include ActionView::Helpers::FormTagHelper } %>
<% environment.context_class.instance_eval { include ActionView::Helpers::FormOptionsHelper } %>

$(function() {
  $('.user-country').change(function() {         
    if ($(this).val() == 'Canada') {
      $('#regions-and-postal-codes').html('<%= label_tag :user_region, "Province" %>' +
        '<select id="user_region" name="user_region">' +
          <% PROVINCES.each do |province| %>
            "<option value='" + '<%= province %>' + "'>" + '<%= province %>' + "</option>" +
          <% end %>
        '<option selected="selected" value="">--</option></select>' +
        '<%= label_tag :user_city %>' +
        '<%= text_field_tag :user_city %>' +
        '<%= label_tag :user_postal_code %>' +
        '<%= text_field_tag :user_postal_code %>'
      );
    } else { 
      $('#regions-and-postal-codes').html('<%= label_tag :user_region, "State" %>' +
        '<select id="user_region" name="user_region">' +
          <% STATES.each do |state| %>
            "<option value='" + '<%= state %>' + "'>" + '<%= state %>' + "</option>" +
          <% end %>
        '<option selected="selected" value="">--</option></select>' +
        '<%= label_tag :user_city, "City" %>' +
        '<%= text_field_tag :user_city %>' +
        '<%= label_tag :user_postal_code, "Zip Code" %>' +
        '<%= text_field_tag :user_postal_code %>'
      ); 
    }
  });
});

$(function() {
  $('.bicycle-country').change(function() { 
    if ($(this).val() == 'Canada') {
      $('#regions-and-postal-codes').html('<%= label_tag :bicycle_region, "Province" %>' +
        '<select id="bicycle" name="bicycle">' +
          <% PROVINCES.each do |province| %>
            "<option value='" + '<%= province %>' + "'>" + '<%= province %>' + "</option>" +
          <% end %>
        '<option selected="selected" value="">--</option></select>' +
        '<%= label_tag :bicycle_city %>' +
        '<%= text_field_tag :bicycle_city %>' +
        '<%= label_tag :bicycle_postal_code %>' +
        '<%= text_field_tag :bicycle_postal_code %>'
      );
    } else { 
      $('#regions-and-postal-codes').html('<%= label_tag :bicycle_region, "State" %>' +
        '<select id="bicycle" name="bicycle">' +
          <% STATES.each do |state| %>
            "<option value='" + '<%= state %>' + "'>" + '<%= state %>' + "</option>" +
          <% end %>
        '<option selected="selected" value="">--</option></select>' +
        '<%= label_tag :bicycle_city, "City" %>' +
        '<%= text_field_tag :bicycle_city %>' +
        '<%= label_tag :bicycle_postal_code, "Zip Code" %>' +
        '<%= text_field_tag :bicycle_postal_code %>'
      ); 
    }
  });
});

function formCountryLocations() {
  if ($(this).val() == 'Canada') {
    $('#regions-and-postal-codes').html(
      <%= label_tag :bicycle_region, 'Province' %>
      <%= select_tag :bicycle, options_for_select(PROVINCES << '--') %>
      <%= label_tag :bicycle_city %>
      <%= text_field_tag :bicycle_city %>
      <%= label_tag :bicycle_postal_code %>
      <%= text_field_tag :bicycle_postal_code %>
    );
  } else { 
    $('#regions-and-postal-codes').html(        
      <%= label_tag :bicycle_region, 'State' %>
      <%= select_tag :bicycle, options_for_select(STATES << '--') %>
      <%= label_tag :bicycle_city, 'City' %>
      <%= text_field_tag :bicycle_city %>
      <%= label_tag :bicycle_postal_code, 'Zip Code' %>
      <%= text_field_tag :bicycle_postal_code %>
    ); 
  }
}


function formUserLocations() {
  
}

function formBicycleLocations() {
  
}
