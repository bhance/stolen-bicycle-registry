<% environment.context_class.instance_eval { include ActionView::Helpers::FormTagHelper } %>
<% environment.context_class.instance_eval { include ActionView::Helpers::FormOptionsHelper } %>

$(function() {
  $('.user-country').change(function() {         
    formCountryLocations();
  });
});

$(function() {
  $('.bicycle-country').change(function() {         
    formCountryLocations();
    }
  });
});

function formCountryLocations() {
  if ($(this).val() == 'Canada') {
    $('#regions-and-postal-codes').html(  
      <%= label_tag :bicycle_region, 'Province' %>
      <%= select_tag :bicycle, options_for_select(PROVINCES << '--') %>
      <%= label_tag :bicycle_city %>
      <%= text_field_tag :bicycle_city %>
      <%= label_tag :bicycle_postal_code %>
      <%= text_field_tag :bicycle_postal_code %>
    );
  } else { 
    $('#regions-and-postal-codes').html(        
      <%= label_tag :bicycle_region, 'State' %>
      <%= select_tag :bicycle, options_for_select(STATES << '--') %>
      <%= label_tag :bicycle_city, 'City' %>
      <%= text_field_tag :bicycle_city %>
      <%= label_tag :bicycle_postal_code, 'Zip Code' %>
      <%= text_field_tag :bicycle_postal_code %>
    ); 
  }
}

